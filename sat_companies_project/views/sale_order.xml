<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="view_sale_order_inherit_sat_companies_project" model="ir.ui.view">
        <field name="name">sale.orderform.inherit</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">

            <xpath expr="//button[@name='action_quotation_send']" position="replace">
                <button 
                    name="action_quotation_send" 
                    type="object" 
                    string="ENVIAR PRESUPUESTO"  
                    attrs="{'invisible': [('state', '!=', 'draft')]}"
                    context="{'proforma': True}"/>
                <field name="is_potential_client" invisible="1"/>
            </xpath>

            <xpath expr="//button[@name='action_confirm']" position="replace">
                <button 
                name="action_confirm" 
                id="action_confirm" 
                string="Confirm" 
                class="btn-primary" 
                type="object" 
                attrs="{'invisible': [('state', '=', 'sale')]}"/>
            </xpath>

            <xpath expr="//field[(@name='partner_id')]" position="after">
                <field name="users_ids" widget="many2many_tags"/>
                <field name="check_users" invisible="True"/>
                <label for="date_begin" string="Planned Date" attrs="{'invisible': [('check_users', '=', False)]}"/>
                <div class="w-100" attrs="{'invisible': [('check_users', '=', False)]}">
                    <div class="o_row">
                        <field name="date_begin" widget="daterange" options='{"related_end_date": "date_end"}' attrs="{'required':[('check_users','!=',False)]}"/>
                        <i class="fa fa-long-arrow-right mx-2 oe_edit_only" aria-label="Arrow icon" title="Arrow"/>
                        <i class="fa fa-long-arrow-right mx-2 oe_read_only" aria-label="Arrow icon" title="Arrow"/>
                        <field name="date_end" widget="daterange" options='{"related_start_date": "date_begin"}' attrs="{'required':[('check_users','!=',False)]}"/>
                    </div>
                </div>
                <field name="is_potential_client" invisible="1"/>
                <field name="is_mounting" invisible="1"/>
                <field name="is_maintenance" invisible="1"/>
                <field name="is_normative" invisible="1"/>
                <field name="project_task_id"  invisible="1"/>
            </xpath>

            <xpath expr="//field[@name='payment_term_id']" position="attributes">
                <attribute name="attrs">{}</attribute>
                <attribute name="required">1</attribute>
            </xpath>

            <xpath expr="//field[@name='amount_total']" position="after">
               <field name="total_service_line"/>
            </xpath>

            <xpath expr="//form[1]/sheet[1]/notebook[1]" position="inside">
                <page string="Description" name="commercial_description">
                    <group name="principal_group">
                        <field name="comercial_description"/>
                    </group>
                </page>
            </xpath>

        </field> 
    </record>
</odoo>